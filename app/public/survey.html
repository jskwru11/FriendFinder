<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>test</title>

    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


</head>
<body>
    <div class="container">
    <h2>Survey Questions</h2>

    <hr>

    <h2>About You</h2>

    <form action="/survey" class="form-group" method="POST" id="surveyForm">
    
        <div class="">
            <label for="userName">Name (Required)</label>
            <input type="text" name="username" id="name" class="form-control required">
        </div>

        <div class="">
            <label for="userPhoto">Link to Photo Image (Required)</label>
            <input type="text" name="userPhoto" id="photo" class="form-control required">
        </div>

        <hr>



        <h2>Question 1</h2>
        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
        <select id="q1" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 2</h2>
        <h4>Generally speaking, you rely more on your experience than your imagination.</h4>  
        <select id="q2" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 3</h2>
        <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
        <select id="q3" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 4</h2>
        <h4>You rarely do something just out of sheer curiosity.</h4>
        <select id="q4" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 5</h2>
        <h4>People can rarely upset you.</h4>
        <select id="q5" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 6</h2>
        <h4>It is often difficult for you to relate to other people’s feelings.</h4>
        <select id="q6" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 7</h2>
        <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
        <select id="q7" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 8</h2>
        <h4>You rarely get carried away by fantasies and ideas.</h4>
        <select id="q8" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 9</h2>
        <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
        <select id="q9" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h2>Question 10</h2>
        <h4>You feel more energetic after spending time with a group of people.</h4>
        <select id="q10" class="custom-select custom-select-lg mb-3" style="width: 200px;">
            <option selected>Open this select menu</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <button class="btn btn-primary btn-lg btn-block"><i class="fa fa-check-circle" aria-hidden="true"></i> Submit</button>

    </form>

    <hr>

    <footer>
        <p>
        <a href="/api/friends">API Friends List</a>
            | 
        <a href="https://github.com/jskwru11/News-Letter">GitHub Repo</a>
    </p>
    </footer>

    <!-- Modal -->
    <div id="results-modal" class="modal fade" role="dialog">
            <div class="modal-dialog">
        
                <!-- Modal content-->
                <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">×</button>
                    <h2 class="modal-title"><strong>Best Match</strong></h2>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-img" src="" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
                </div>
        
            </div>
            </div>

</div>


<script>
    $('#surveyForm').on('submit', function(evt) {
        evt.preventDefault();


        const q1 = $('#q1').val();
        const q2 = $('#q2').val();
        const q3 = $('#q3').val();
        const q4 = $('#q4').val();
        const q5 = $('#q5').val();
        const q6 = $('#q6').val();
        const q7 = $('#q7').val();
        const q8 = $('#q8').val();
        const q9 = $('#q9').val();
        const q10 = $('#q10').val();

        if ($('#name').val() && $('#photo').val() && q1 && q2 && q3 && q4 && q5 && q6 && q7 && q8 && q9 && q10) {
            var userInfo = {
            name: $('#name').val(),
            photo: $('#photo').val(),
            scores: [
                q1,
                q2,
                q3,
                q4,
                q5,
                q6,
                q7,
                q8,
                q9,
                q10,
            ]
        };
        
            $.post('/api/friends', userInfo, function(data) {
                const name = data.name;
                const photo = data.photo;

                $('#match-name').text(name);
                $('#match-img').attr('src', photo);
                $('#results-modal').modal('toggle');
            });
        } else {
            alert(`Please complete the entire survey before submitting your results...`);
        }

        
    });
</script>


</body>
</html>